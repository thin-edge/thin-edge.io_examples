{"__symbolic":"module","version":4,"metadata":{"DefaultSubscriptionsModule":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"NgModule","line":9,"character":1},"arguments":[{"imports":[{"__symbolic":"reference","module":"@c8y/ngx-components","name":"CoreModule","line":10,"character":12},{"__symbolic":"reference","module":"@angular/forms","name":"ReactiveFormsModule","line":10,"character":24}],"declarations":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"entryComponents":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"exports":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"providers":[{"__symbolic":"reference","name":"DefaultSubscriptionsService"},{"__symbolic":"reference","name":"ɵa"},{"provide":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HOOK_NAVIGATOR_NODES","line":18,"character":15},"useClass":{"__symbolic":"reference","name":"ɵb"},"multi":true},{"provide":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HOOK_ONCE_ROUTE","line":23,"character":15},"useValue":[{"path":"default-subscriptions","component":{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"},"canActivate":[{"__symbolic":"reference","name":"ɵa"}]}],"multi":true}]}]}],"members":{}},"DefaultSubscriptionsService":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":20,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/client","name":"ApplicationService","line":23,"character":32},{"__symbolic":"reference","module":"@c8y/client","name":"TenantService","line":24,"character":27},{"__symbolic":"reference","module":"@c8y/client","name":"TenantOptionsService","line":25,"character":34},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HumanizeAppNamePipe","line":26,"character":33}]}],"getSubscribableTenantApps":[{"__symbolic":"method"}],"getDefaultSubscriptionsEvaluatedFromParentTenant":[{"__symbolic":"method"}],"getDefaultSubscriptionsFromCurrentTenant":[{"__symbolic":"method"}],"saveDefaultSubscriptionsToCurrentTenant":[{"__symbolic":"method"}],"getDefaultSubscriptions":[{"__symbolic":"method"}],"getTenantOptions":[{"__symbolic":"method"}],"saveOnCreationSubscriptions":[{"__symbolic":"method"}],"saveOnUpgradeSubscriptions":[{"__symbolic":"method"}],"getTenantOption":[{"__symbolic":"method"}],"setTenantOption":[{"__symbolic":"method"}],"unsetTenantOption":[{"__symbolic":"method"}],"namesToPartialApps":[{"__symbolic":"method"}],"partialAppsListToAppsNames":[{"__symbolic":"method"}],"partialAppsToMicroservicesNames":[{"__symbolic":"method"}]}},"DefaultSubscriptionsComponent":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Component","line":10,"character":1},"arguments":[{"selector":"c8y-default-subscriptions","template":"<c8y-title>{{ 'Default subscriptions' | translate }}</c8y-title>\n\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\n  <div class=\"card card--fullpage\">\n    <div class=\"card-header separator\">\n      <h4 class=\"card-title\" translate>Default subscriptions</h4>\n    </div>\n    <div class=\"inner-scroll\">\n      <div class=\"card--grid grid__col--2-8-2--md grid__col--3-6-3\">\n        <div class=\"card-block large-padding bg-gray-white sticky-top separator-bottom p-b-0\">\n          <p><strong translate>Applications subscribed to a tenant on creation</strong></p>\n          <div class=\"text-center\">\n            <label class=\"c8y-switch\">\n              <input type=\"checkbox\" formControlName=\"overrideOnCreationSubscriptions\" />\n              <span></span> {{ 'Override inherited' | translate }}\n            </label>\n          </div>\n        </div>\n        <div class=\"card-block bg-white sticky-top separator-bottom\">\n          <p><b translate>Applications</b></p>\n          <p translate>\n            Configure default subscriptions in the platform, both for tenant creation and for platform upgrade. To display a full list of available applications, override inherited settings.\n          </p>\n        </div>\n        <div class=\"card-block large-padding bg-gray-white sticky-top separator-bottom p-b-0\">\n          <p><strong translate>Applications subscribed to a tenant on platform upgrade</strong></p>\n          <div class=\"text-center\">\n            <label class=\"c8y-switch\">\n              <input type=\"checkbox\" formControlName=\"overrideOnUpgradeSubscriptions\" />\n              <span></span> {{ 'Override inherited' | translate }}\n            </label>\n          </div>\n        </div>\n        <div class=\"card-block bg-gray-white\" *ngIf=\"loading\"></div>\n        <div class=\"card-block bg-white\" *ngIf=\"loading\">\n          <div class=\"p-r-48 p-b-24 d-inline-block p-relative\">\n            <div class=\"spinner\">\n              <div class=\"rect1\"></div>\n              <div class=\"rect2\"></div>\n              <div class=\"rect3\"></div>\n              <div class=\"rect4\"></div>\n              <div class=\"rect5\"></div>\n            </div>\n          </div>\n          <span translate>Loading application subscriptions…</span>\n        </div>\n        <div class=\"card-block bg-gray-white\" *ngIf=\"loading\"></div>\n        <ng-container formArrayName=\"appRows\" class=\"d-contents\">\n          <div class=\"bg-gray-white\" *ngIf=\"!loading && isEmptyView()\"></div>\n          <div class=\"card-block bg-white\" *ngIf=\"!loading && isEmptyView()\">\n            <div class=\"c8y-empty-state\">\n              <h1 class=\"c8y-icon c8y-icon-c8y-data c8y-icon-duocolor\"></h1>\n              <h3 translate>No application subscriptions yet.</h3>\n              <p translate>\n                Select \"Override inherited\" to define the list of subscribed applications.\n              </p>\n            </div>\n          </div>\n          <div class=\"bg-gray-white\" *ngIf=\"!loading && isEmptyView()\"></div>\n\n          <div\n            *ngFor=\"let appRowControl of form.get('appRows')['controls']; let i = index\"\n            class=\"d-contents\"\n          >\n            <ng-container\n              *ngIf=\"shouldShowAppRow(appRowControl.getRawValue())\"\n              formArrayName=\"{{ i }}\"\n              class=\"d-contents\"\n            >\n              <div class=\"c8y-list__item d-flex d-col bg-gray-white text-center\">\n                <div class=\"flex-item-middle\">\n                  <label\n                    class=\"c8y-checkbox d-inline-block\"\n                    [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnCreation.disabled }\"\n                  >\n                    <input type=\"checkbox\" formControlName=\"subscribedOnCreation\" />\n                    <span></span>\n                  </label>\n                </div>\n              </div>\n\n              <div class=\"c8y-list__item bg-white\">\n                <div class=\"c8y-list__item__block\">\n                  <div class=\"c8y-list__item__appicon\">\n                    <c8y-app-icon\n                      [app]=\"appRowControl.value.app\"\n                      [name]=\"appRowControl.value.app.name\"\n                      [contextPath]=\"appRowControl.value.app.contextPath\"\n                    ></c8y-app-icon>\n                  </div>\n                  <div class=\"c8y-list__item__body\">\n                    <div class=\"content-flex-50\">\n                      <div class=\"col-6\">\n                        <p\n                          class=\"text-truncate\"\n                          title=\"{{ appRowControl.value.app | humanizeAppName | async }}\"\n                        >\n                          {{ appRowControl.value.app | humanizeAppName | async }}\n                        </p>\n                        <small class=\"text-muted\">{{ appRowControl.value.app.contextPath }}</small>\n                      </div>\n                      <div class=\"col-6\">\n                        <p>\n                          <span class=\"text-label-small m-r-4\" translate>\n                            Tenant ID\n                          </span>\n                          {{ appRowControl.value.app.owner.tenant.id }}\n                        </p>\n                        <!-- TODO: uncomment when company name is available\n                          <p>\n                          <span class=\"text-label-small m-r-4\" translate>Company</span>\n                          <small class=\"text-muted\">company name</small>\n                        </p> -->\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"c8y-list__item d-flex d-col bg-gray-white text-center\">\n                <div class=\"flex-item-middle\">\n                  <label\n                    class=\"c8y-checkbox d-inline-block\"\n                    [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnUpgrade.disabled }\"\n                  >\n                    <input type=\"checkbox\" formControlName=\"subscribedOnUpgrade\" />\n                    <span></span>\n                  </label>\n                </div>\n              </div>\n            </ng-container>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"card-footer separator\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n        [disabled]=\"form.invalid || form.pristine\"\n        title=\"{{ 'Save default subscriptions' | translate }}\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</form>\n"}]}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@angular/forms","name":"FormBuilder","line":25,"character":16},{"__symbolic":"reference","name":"DefaultSubscriptionsService"},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"AlertService","line":27,"character":26}]}],"ngOnInit":[{"__symbolic":"method"}],"initForm":[{"__symbolic":"method"}],"shouldShowAppRow":[{"__symbolic":"method"}],"isEmptyView":[{"__symbolic":"method"}],"isSubscribed":[{"__symbolic":"method"}],"save":[{"__symbolic":"method"}],"onOverrideOnCreationSubscriptionsChange":[{"__symbolic":"method"}],"enableSubscribeOnCreationCheckboxes":[{"__symbolic":"method"}],"disableSubscribeOnCreationCheckboxes":[{"__symbolic":"method"}],"restoreSubscribeOnCreationFromParent":[{"__symbolic":"method"}],"onOverrideOnUpgradeSubscriptionsChange":[{"__symbolic":"method"}],"enableSubscribeOnUpgradeCheckboxes":[{"__symbolic":"method"}],"disableSubscribeOnUpgradeCheckboxes":[{"__symbolic":"method"}],"restoreSubscribeOnUpgradeFromParent":[{"__symbolic":"method"}],"loadDefaultSubscriptions":[{"__symbolic":"method"}],"getDefaultSubscriptionsForSave":[{"__symbolic":"method"}]}},"PartialAppsList":{"__symbolic":"interface"},"DefaultSubscriptions":{"__symbolic":"interface"},"DefaultSubscriptionsContext":{"CURRENT_TENANT":0,"PARENT_TENANT":1},"ɵa":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":4,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/ngx-components","name":"TenantUiService","line":8,"character":39}]}],"canActivate":[{"__symbolic":"method"}]}},"ɵb":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":4,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","name":"ɵa"}]}],"get":[{"__symbolic":"method"}]}}},"origins":{"DefaultSubscriptionsModule":"./default-subscriptions.module","DefaultSubscriptionsService":"./default-subscriptions.service","DefaultSubscriptionsComponent":"./default-subscriptions.component","PartialAppsList":"./default-subscriptions.model","DefaultSubscriptions":"./default-subscriptions.model","DefaultSubscriptionsContext":"./default-subscriptions.model","ɵa":"./default-subscriptions.guard","ɵb":"./default-subscriptions-navigation.factory"},"importAs":"@c8y/ngx-components/default-subscriptions"}